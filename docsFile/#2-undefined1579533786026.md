Docker
=

### Installation
[ Debian](https://docs.docker.com/install/linux/docker-ce/debian/#install-docker-ce-1) 
[Ubuntu](https://docs.docker.com/install/linux/docker-ce/ubuntu/#set-up-the-repository)

### Aprés l'installation:
`sudo groupadd docker` -> créer le groupe
`sudo usermod -aG docker $USER` -> Ajoute l'utilisateur au groupe
`docker run hello-world` -> Teste si cela fonctionne

### Configurer au démarrage:
	sudo systemctl enable docker
 	sudo systemctl disable docker
 	echo manual | sudo tee /etc/init/docker.override
	sudo chkconfig docker on
	
[Liens doc](https://docs.docker.com/install/linux/linux-postinstall/#configuring-remote-access-with-systemd-unit-file) 

### Syntaxe
	/* Cherche les image */
	docker search [image]
	/* Liste les images local */
	docker images
	/* Lister les conteneurs qui tourne */
	docker ps -a
	/* Supprimer un conteneur */
	docker rm [id]
	/* Cherche l'image et la télécharge si elle n'est pas en local */
	docker pull [image] 
	/*  Lance l'instance de l'image si il ne la trouve pas la télécharge (it -> interactif) */ 
	docker run [-it] [image]
	/* Supprime une image */
	docker rmi [id]
	/* Lance un dockerfile (.-> repertoire ou se trouve le fichier) */
	docker build -t [nom image] .
	/* Sauvegarder une images */
	docker commit [idContainer] [nom]


	/* Lance un container avec un autre nom et l'arrete */
	docker run --rm --name [nom du container] [IMAGE]
	
	/* Meta du container */
	docker inspect [CONTAINER]

	/* Lance une image nginx sur un container ('d' permet de récupèrer la main)
	docker run -d --name webserver nginx

	/* lance l'image nginx en exposant le port 80 du container ver le port 80 dce l'host */
	docker run -p 80:80 -d --name web nginx

[Guide](https://linuxfr.org/news/docker-tutoriel-pour-manipuler-les-conteneurs) 
[docker Hub](https://hub.docker.com/search?q=&type=image) 

### DockerFile

	/* selection de l'image */
	FROM ubuntu 
	RUN apt-get update && apt-get -y install git curl

	RUN git clone http://github.com/creationix/nvm.git /root/.nvm;
	RUN chmod -R 777 /root/.nvm/;
	RUN bash /root/.nvm/install.sh;
	RUN bash -i -c 'nvm install 10.12.0';

	RUN apt-get -y install openjdk-8-jdk openjdk-8-jre
	RUN export JAVA_HOME="/usr/lib/jvm/java-1.8.0-openjdk-amd64"

**FROM** : image de base (Ubuntu, Debian) ;
**RUN** : commande à exécuter pour installer le conteneur ;
**CMD** : commande qui s’exécute au démarrage du conteneur ;
**ADD** : copier un fichier du répertoire courant dans le système de fichiers du conteneur ;
[Doc](https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#run) 